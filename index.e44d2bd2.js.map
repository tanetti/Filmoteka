{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_check_private_redeclaration.js","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_class_private_method_get.js","node_modules/@swc/helpers/lib/_class_private_method_init.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/state/state.js","src/js/state/state-instance.js","<<jsx-config-pragma.js>>","src/js/locale/locale-db.js","src/js/locale/locale-header.js","src/js/root-refs.js","src/js/page-mode/set-page-mode.js","src/js/index.js","src/js/page-mode/change-page-mode.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodGet;\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return fn;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateMethodInit(obj, privateSet) {\n    (0, _checkPrivateRedeclaration).default(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","const STATE_LS_KEY = 'filmotekaPageState';\n\nexport class State {\n  constructor() {\n    this._locale = 'en';\n    this._mode = 'light';\n    this._currentPage = 'home';\n  }\n\n  get locale() {\n    return this._locale;\n  }\n\n  set locale(locale) {\n    if (!['en', 'ua'].includes(locale)) return;\n\n    this._locale = locale;\n\n    this.#recordStateToLS();\n  }\n\n  get mode() {\n    return this._mode;\n  }\n\n  set mode(mode) {\n    if (!['light', 'dark'].includes(mode)) return;\n\n    this._mode = mode;\n\n    this.#recordStateToLS();\n  }\n\n  get currentPage() {\n    return this._currentPage;\n  }\n\n  set currentPage(currentPage) {\n    if (!['home', 'libraryA', 'libraryB'].includes(currentPage)) return;\n\n    this._currentPage = currentPage;\n\n    this.#recordStateToLS();\n  }\n\n  init() {\n    const savedState = this.#loadStateFromLS();\n\n    if (!savedState) return;\n    this._locale = savedState.locale;\n    this._mode = savedState.mode;\n    this._currentPage = savedState.currentPage;\n  }\n\n  #loadStateFromLS() {\n    const loadedState = localStorage.getItem(STATE_LS_KEY);\n    if (!loadedState) return;\n\n    try {\n      const parsedState = JSON.parse(loadedState);\n\n      for (const key of Object.keys(parsedState)) {\n        if (!['locale', 'mode', 'currentPage'].includes(key)) throw new Error();\n      }\n\n      return parsedState;\n    } catch {\n      localStorage.removeItem(STATE_LS_KEY);\n    }\n  }\n\n  #recordStateToLS() {\n    const currentState = {\n      locale: this._locale,\n      mode: this._mode,\n      currentPage: this._currentPage,\n    };\n\n    localStorage.setItem(STATE_LS_KEY, JSON.stringify(currentState));\n  }\n}\n","import { State } from './state';\n\nexport const pageState = new State();\n",null,"export const localeDB = {\n  en: {\n    header: {\n      locale: 'EN',\n      home: 'Home',\n      library: 'My library',\n      signIn: 'Sign In',\n    },\n  },\n\n  ua: {\n    header: {\n      locale: 'UA',\n      home: 'Головна',\n      library: 'Бібліотека',\n      signIn: 'Увійти',\n    },\n  },\n};\n","import { rootRefs } from '../root-refs';\nimport { localeDB } from './locale-db';\n\nconst { headerContainer } = rootRefs;\n\nconst refs = {\n  headerLocaleFields: headerContainer.querySelectorAll('[data-locale_field]'),\n};\n\nexport const setHeaderLocaleFields = locale => {\n  for (const localeField of Array.from(refs.headerLocaleFields)) {\n    localeField.textContent =\n      localeDB[locale].header[localeField.dataset.locale_field];\n  }\n};\n","export const rootRefs = {\n  headerContainer: document.querySelector('[data-header]'),\n};\n","export const setPageMode = mode => {\n  bodyClassRef = document.body.classList;\n  switchRef = document.querySelector('[data-mode_switch]');\n\n  if (mode === 'light' && bodyClassRef.contains('dark-mode')) {\n    bodyClassRef.remove('dark-mode');\n    switchRef.checked = false;\n    return;\n  }\n\n  if (mode === 'dark' && !bodyClassRef.contains('dark-mode')) {\n    bodyClassRef.add('dark-mode');\n    switchRef.checked = true;\n  }\n\n  if (!bodyClassRef.contains('isLoaded'))\n    setTimeout(() => bodyClassRef.add('isLoaded'), 250);\n};\n","import { pageState } from './state';\nimport { setHeaderLocaleFields } from './locale';\nimport { setPageMode, changePageMode } from './page-mode';\n\nconst refs = {\n  localeSwitch: document.querySelector('[data-locale_switch]'),\n  modeSwitch: document.querySelector('[data-mode_switch]'),\n};\n\npageState.init();\n\nsetPageMode(pageState.mode);\nsetHeaderLocaleFields(pageState.locale);\n\nconst changeLocale = () => {\n  pageState.locale = pageState.locale === 'en' ? 'ua' : 'en';\n\n  setHeaderLocaleFields(pageState.locale);\n};\n\nrefs.localeSwitch.addEventListener('click', changeLocale);\nrefs.modeSwitch.addEventListener('change', changePageMode);\n","import { pageState } from '../state';\nimport { setPageMode } from './set-page-mode';\n\nexport const changePageMode = () => {\n  pageState.mode = pageState.mode === 'light' ? 'dark' : 'light';\n\n  setPageMode(pageState.mode);\n};\n"],"names":["Object","defineProperty","module","exports","value","default","obj","privateCollection","has","TypeError","$665014edacbfe17b$exports","instance","Constructor","$82ce8d6f4ce6ea51$exports","receiver","privateSet","fn","$b5362597a15e80da$exports","$b5362597a15e80da$var$_checkPrivateRedeclaration","add","parcelRequire","__esModule","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$8f786f4443fc7bcc$var$STATE_LS_KEY","$8f786f4443fc7bcc$var$_loadStateFromLS","WeakSet","$8f786f4443fc7bcc$var$_recordStateToLS","$8f786f4443fc7bcc$var$loadStateFromLS","loadedState","localStorage","getItem","parsedState","JSON","parse","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","keys","Symbol","iterator","next","done","includes","Error","err","return","e","removeItem","$8f786f4443fc7bcc$var$recordStateToLS","currentState","locale","this","_locale","mode","_mode","currentPage","_currentPage","setItem","stringify","$1566eea8a6bcdf86$export$c91b4ab4007612ea","State","$parcel$interopDefault","call","savedState","$3c0b9ab2798566b7$export$d01b55d40f416622","en","header","home","library","signIn","ua","$c22bce03fdd7f06b$var$refs","headerLocaleFields","headerContainer","document","querySelector","querySelectorAll","$c22bce03fdd7f06b$export$1896be377c6a5ded","Array","from","localeField","textContent","dataset","locale_field","$905e78ec61702f17$export$73bfa1ffcc444b45","bodyClassRef","body","classList","switchRef","contains","remove","checked","setTimeout","$44ae6d9db4eaca0f$var$refs","localeSwitch","modeSwitch","init","addEventListener"],"version":3,"file":"index.e44d2bd2.js.map"}