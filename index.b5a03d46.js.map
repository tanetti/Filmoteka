{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_check_private_redeclaration.js","node_modules/@swc/helpers/lib/_class_private_method_get.js","node_modules/@swc/helpers/lib/_class_private_method_init.js","src/js/state/state.js","src/js/state/state-instance.js","src/js/locale/locale-db.js","src/js/root-refs.js","src/js/locale/locale-header.js","src/js/page-mode/set-page-mode.js","src/js/index.js","src/js/page-mode/change-page-mode.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodGet;\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return fn;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateMethodInit(obj, privateSet) {\n    (0, _checkPrivateRedeclaration).default(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","const STATE_LS_KEY = 'filmotekaPageState';\n\nexport class State {\n  constructor() {\n    this._locale = 'en';\n    this._mode = 'light';\n    this._currentPage = 'home';\n  }\n\n  get locale() {\n    return this._locale;\n  }\n\n  set locale(locale) {\n    if (!['en', 'ua'].includes(locale)) return;\n\n    this._locale = locale;\n\n    this.#recordStateToLS();\n  }\n\n  get mode() {\n    return this._mode;\n  }\n\n  set mode(mode) {\n    if (!['light', 'dark'].includes(mode)) return;\n\n    this._mode = mode;\n\n    this.#recordStateToLS();\n  }\n\n  get currentPage() {\n    return this._currentPage;\n  }\n\n  set currentPage(currentPage) {\n    if (!['home', 'libraryA', 'libraryB'].includes(currentPage)) return;\n\n    this._currentPage = currentPage;\n\n    this.#recordStateToLS();\n  }\n\n  init() {\n    const savedState = this.#loadStateFromLS();\n\n    if (!savedState) return;\n    this._locale = savedState.locale;\n    this._mode = savedState.mode;\n    this._currentPage = savedState.currentPage;\n  }\n\n  #loadStateFromLS() {\n    const loadedState = localStorage.getItem(STATE_LS_KEY);\n    if (!loadedState) return;\n\n    try {\n      const parsedState = JSON.parse(loadedState);\n\n      for (const key of Object.keys(parsedState)) {\n        if (!['locale', 'mode', 'currentPage'].includes(key)) throw new Error();\n      }\n\n      return parsedState;\n    } catch {\n      localStorage.removeItem(STATE_LS_KEY);\n    }\n  }\n\n  #recordStateToLS() {\n    const currentState = {\n      locale: this._locale,\n      mode: this._mode,\n      currentPage: this._currentPage,\n    };\n\n    localStorage.setItem(STATE_LS_KEY, JSON.stringify(currentState));\n  }\n}\n","import { State } from './state';\n\nexport const pageState = new State();\n","export const localeDB = {\n  en: {\n    header: {\n      locale: 'EN',\n      home: 'Home',\n      library: 'My library',\n      signIn: 'Sign In',\n    },\n  },\n\n  ua: {\n    header: {\n      locale: 'UA',\n      home: 'Головна',\n      library: 'Бібліотека',\n      signIn: 'Увійти',\n    },\n  },\n};\n","export const rootRefs = {\n  headerContainer: document.querySelector('[data-header]'),\n};\n","import { rootRefs } from '../root-refs';\nimport { localeDB } from './locale-db';\n\nconst { headerContainer } = rootRefs;\n\nconst refs = {\n  headerLocaleFields: headerContainer.querySelectorAll('[data-locale_field]'),\n};\n\nexport const setHeaderLocaleFields = locale => {\n  for (const localeField of Array.from(refs.headerLocaleFields)) {\n    localeField.textContent =\n      localeDB[locale].header[localeField.dataset.locale_field];\n  }\n};\n","export const setPageMode = mode => {\n  bodyClassRef = document.body.classList;\n  switchRef = document.querySelector('[data-mode_switch]');\n\n  if (mode === 'light' && bodyClassRef.contains('dark-mode')) {\n    bodyClassRef.remove('dark-mode');\n    switchRef.checked = false;\n    return;\n  }\n\n  if (mode === 'dark' && !bodyClassRef.contains('dark-mode')) {\n    bodyClassRef.add('dark-mode');\n    switchRef.checked = true;\n  }\n\n  if (!bodyClassRef.contains('isLoaded'))\n    setTimeout(() => bodyClassRef.add('isLoaded'), 250);\n};\n","import { pageState } from './state';\nimport { setHeaderLocaleFields } from './locale';\nimport { setPageMode, changePageMode } from './page-mode';\n\nconst refs = {\n  localeSwitch: document.querySelector('[data-locale_switch]'),\n  modeSwitch: document.querySelector('[data-mode_switch]'),\n};\n\npageState.init();\n\nsetPageMode(pageState.mode);\nsetHeaderLocaleFields(pageState.locale);\n\nconst changeLocale = () => {\n  pageState.locale = pageState.locale === 'en' ? 'ua' : 'en';\n\n  setHeaderLocaleFields(pageState.locale);\n};\n\nrefs.localeSwitch.addEventListener('click', changeLocale);\nrefs.modeSwitch.addEventListener('change', changePageMode);\n","import { pageState } from '../state';\nimport { setPageMode } from './set-page-mode';\n\nexport const changePageMode = () => {\n  pageState.mode = pageState.mode === 'light' ? 'dark' : 'light';\n\n  setPageMode(pageState.mode);\n};\n"],"names":["Object","defineProperty","module","exports","value","default","obj","privateCollection","has","TypeError","$c9f733bc98e3bbfd$exports","receiver","privateSet","fn","$60afe4cd2804d2bb$exports","$60afe4cd2804d2bb$var$_checkPrivateRedeclaration","add","parcelRequire","__esModule","$59a5ef4e55d83682$var$_loadStateFromLS","WeakSet","$59a5ef4e55d83682$var$_recordStateToLS","$59a5ef4e55d83682$var$loadStateFromLS","loadedState","localStorage","getItem","parsedState","JSON","parse","key","keys","includes","Error","removeItem","$59a5ef4e55d83682$var$recordStateToLS","currentState","locale","this","_locale","mode","_mode","currentPage","_currentPage","setItem","stringify","$24398bb132e56d8f$export$c91b4ab4007612ea","$parcel$interopDefault","call","init","savedState","constructor","$25022a46b7deee25$export$d01b55d40f416622","en","header","home","library","signIn","ua","$bfeab2e8b3b8eff4$export$96849c6be5264b0c","headerContainer","document","querySelector","$58b93ec319ddd6c4$var$headerContainer","$58b93ec319ddd6c4$var$refs","headerLocaleFields","querySelectorAll","$58b93ec319ddd6c4$export$1896be377c6a5ded","localeField","Array","from","textContent","dataset","locale_field","$981801e57bab5003$export$73bfa1ffcc444b45","bodyClassRef","body","classList","switchRef","contains","remove","checked","setTimeout","$85a5f86b715fe7db$var$refs","localeSwitch","modeSwitch","addEventListener"],"version":3,"file":"index.b5a03d46.js.map"}